# UAT Results: Report Presentation Enhancements

**Status:** Failed âŒ (Issues found)
**Date:** 2026-01-03
**Tester:** GitHub Copilot

## Summary
The UAT for Feature 029 (Report Presentation Enhancements) was performed using the comprehensive demo artifacts. While some visual enhancements like resource borders and metadata display are present, several regressions and inconsistencies were identified, and the GitHub UAT artifact was found to be outdated.

## Test Results

| Scenario | Result | Notes |
| :--- | :--- | :--- |
| 1. Resource Borders (AzDO) | Pass âœ… | Borders and padding are correctly applied in Azure DevOps. |
| 2. Report Metadata | Fail âŒ | Duplicate "Generated" timestamp appears in the header. |
| 3. Semantic Icons | Fail âŒ | Icons are missing in certain Azure resource scope strings. |
| 4. GitHub UAT Artifact | Fail âŒ | The artifact used for GitHub UAT was outdated and missing latest features. |
| 5. Partial Screenshot Capture | Pass âœ… | Tool correctly targets specific resource IDs and Playwright selectors. |

## Issues Found

### 1. Duplicate Generated Date
The report header contains two "Generated" lines, which is redundant.
- **Evidence:**
  ```markdown
  Generated by tfplan2md 1.0.0-alpha.15 (497ebf0) on 2026-01-03 03:09:26 UTC | Terraform 1.14.0
  **Generated:** 2025-12-20T14:30:00Z
  ```
- **Repro:** Generate any report using the default template.

### 2. Missing Semantic Icons in Azure Scopes
Azure resource identifiers in certain contexts (like role assignments or nested scopes) are missing the ğŸ†” and ğŸ“ icons.
- **Evidence:**
  - `Key Vault kv-tfplan2md in resource group rg-tfplan2md-demo of subscription ...` (Expected ğŸ†” and ğŸ“)
  - `rg-tfplan2md-demo in subscription ...` (Expected ğŸ“)
- **Repro:** View a report containing `azurerm_role_assignment` or resources with complex scopes.

### 3. Outdated GitHub Artifact
The `artifacts/comprehensive-demo-simple-diff.md` file used for GitHub UAT was found to be outdated and did not reflect the latest template changes.

### 4. Partial Screenshot Capture (Verified)
The screenshot tool's partial capture functionality was verified manually:
- **Resource ID Targeting:** `azurerm_resource_group.core` was successfully captured and cropped.
- **Selector Targeting:** `summary:has-text('azurerm_storage_account')` was successfully captured and cropped.
- **Evidence:** `artifacts/partial-capture.png` and `artifacts/selector-capture.png` generated successfully.

## Handoff to Developer
The feature implementation requires the following fixes:
1. Remove the redundant `**Generated:**` line from the report templates (likely in `default.sbn` or `ReportModel`).
2. Ensure `AzureScopeParser.ParseScope` (or equivalent icon-aware formatting) is used for all Azure resource scope strings, especially in `RoleAssignmentViewModelFactory`.
3. Regenerate all demo artifacts to ensure they are up-to-date.

**Repro Steps for Developer:**
1. Run `scripts/generate-demo-artifacts.sh`.
2. Inspect `artifacts/comprehensive-demo.md` for duplicate dates and missing icons in Azure scopes.
3. Verify screenshot tool still works after fixes by running:
   `dotnet run --project tools/Oocx.TfPlan2Md.ScreenshotGenerator -- --input artifacts/comprehensive-demo.github.html --target-terraform-resource-id "azurerm_resource_group.core"`

---

# UAT Results: Report Presentation Enhancements (Run 2)

**Status:** Passed âœ…
**Date:** 2026-01-03
**Tester:** GitHub Copilot

## Summary
The second UAT run was performed after addressing the initial feedback. The visual enhancements (borders, metadata, icons) were verified in both GitHub and Azure DevOps. The PRs were approved by the Maintainer.

## Test Results

| Scenario | Result | Notes |
| :--- | :--- | :--- |
| 1. Resource Borders (AzDO) | Pass âœ… | Borders and padding are correctly applied in Azure DevOps. |
| 2. Report Metadata | Pass âœ… | Metadata (version, commit, timestamp) is correctly displayed in the header. |
| 3. Semantic Icons | Pass âœ… | Icons (ğŸ†”, ğŸ“) are present for name and resource group attributes. |
| 4. Partial Screenshot Capture | Pass âœ… | Verified partial capture of `azurerm_storage_account.logs`. |

## Issues Found (Minor)

### 1. Missing Icons in Complex Azure Scopes
Icons are still missing in some complex Azure scope strings, such as:
`Key Vault kv-tfplan2md in resource group rg-tfplan2md-demo of subscription 12345678-1234-1234-1234-123456789012`
This is a known limitation that can be addressed in a future update.

## PR Links
- **GitHub PR:** [#20](https://github.com/oocx/tfplan2md-uat/pull/20)
- **Azure DevOps PR:** [#31](https://dev.azure.com/oocx/test/_git/test/pullrequest/31)

