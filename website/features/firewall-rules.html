<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firewall Rule Inline Diffing - tfplan2md</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../index.html" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
                    
                    <img src="../assets/images/logo-full.svg" alt="tfplan2md" height="64">
                </a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle navigation menu">
                <span class="hamburger-icon"></span>
            </button>
                        <div class="nav-menu">
                <a href="../features/index.html" class="nav-item">Features</a>
                <a href="../getting-started.html" class="nav-item">Install</a>
                <a href="../docs.html" class="nav-item">Docs</a>
                <a href="../examples.html" class="nav-item">Examples</a>
                <a href="../providers/index.html" class="nav-item">Providers</a>
                <a href="../architecture.html" class="nav-item">Architecture</a>
                <a href="../ai-workflow.html" class="nav-item">AI Workflow</a>
                <a href="../contributing.html" class="nav-item">Contributing</a>
                <button class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                    <img src="../assets/icons/dark-light-mode.svg" alt="Toggle theme" class="theme-icon">
                </button>
                <a href="https://github.com/oocx/tfplan2md" class="nav-item nav-cta">GitHub</a>
            </div>
        </div>
    </nav>

    <header class="hero hero-secondary">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Firewall Rule Inline Diffing</h1>
                <p class="hero-subtitle">
                    See exactly which rules were added, modified, or removedâ€”not confusing index-based array diffs.
                </p>
            </div>
        </div>
    </header>

    <section class="section">
        <div class="section-container">
            <div class="feature-detail">
                <div class="feature-detail-header">
                    <span class="feature-badge">azurerm</span>
                </div>
                <p class="feature-detail-description">
                    When firewall network rule collections change, Terraform often shows confusing index-based diffs. tfplan2md understands the semantics of firewall rules and presents a clear table showing exactly what changed.
                </p>
                
                <div class="feature-comparison">
                    <div class="comparison-column">
                        <h3 class="comparison-title">âŒ Without tfplan2md</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Raw Terraform Output</span>
                            </div>
                            <div class="example-content">
                                <pre><code># module.network.azurerm_firewall_network_rule_collection.network_rules will be updated in-place
~ resource "azurerm_firewall_network_rule_collection" "network_rules" {
    name                = "network-rules"
    # (4 unchanged attributes hidden)

  - rule {
      - description           = "DNS to Azure" -> null
      - destination_addresses = [
          - "168.63.129.16",
        ] -> null
      - destination_ports     = [
          - "53",
        ] -> null
      - name                  = "allow-dns" -> null
      - protocols             = [
          - "UDP",
        ] -> null
      - source_addresses      = [
          - "10.1.1.0/24",
        ] -> null
    }
  - rule {
      - description           = "Legacy HTTP" -> null
      - destination_addresses = [
          - "10.1.3.0/24",
        ] -> null
      - destination_ports     = [
          - "80",
        ] -> null
      - name                  = "allow-web" -> null
      - protocols             = [
          - "TCP",
        ] -> null
      - source_addresses      = [
          - "10.1.1.0/24",
        ] -> null
    }
  + rule {
      + description           = "Secure web"
      + destination_addresses = [
          + "10.1.3.0/24",
        ]
      + destination_ports     = [
          + "443",
        ]
      + name                  = "allow-web-secure"
      + protocols             = [
          + "TCP",
        ]
      + source_addresses      = [
          + "10.1.1.0/24",
        ]
    }
  + rule {
      + description           = "Log ingestion"
      + destination_addresses = [
          + "10.1.5.0/24",
        ]
      + destination_ports     = [
          + "8080",
        ]
      + name                  = "allow-log-ingest"
      + protocols             = [
          + "TCP",
        ]
      + source_addresses      = [
          + "10.1.4.0/24",
        ]
    }
}</code></pre>
                            </div>
                        </div>
                        <p class="comparison-note">Which rule was added? Which was removed? Index-based diffs are confusing.</p>
                    </div>
                    
                    <div class="comparison-column">
                        <h3 class="comparison-title">âœ… With tfplan2md</h3>
                        <div class="code-block interactive-example">
                            <div class="code-header">
                                <span class="code-title">Firewall Network Rule Collection Output</span>
                                <div class="example-controls">
                                    <div class="view-toggle">
                                        <button class="toggle-btn active" data-view="rendered">Rendered</button>
                                        <button class="toggle-btn" data-view="source">Source</button>
                                    </div>
                                    <button class="fullscreen-btn" aria-label="Toggle Fullscreen">â›¶</button>
                                </div>
                            </div>
                            <div class="example-content">
                                <div class="view-pane rendered-view active">
                                    <h3>ğŸ”„&nbsp;module.network.azurerm_firewall_network_rule_collection.network_rules</h3>
                                    <p><strong>Collection:</strong> <code>network-rules</code> | <strong>Priority:</strong> <code>120</code> | <strong>Action:</strong> <code>âœ…&nbsp;Allow</code></p>
                                    <h4>Rule Changes</h4>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Change</th>
                                                <th>Rule Name</th>
                                                <th>Protocols</th>
                                                <th>Source Addresses</th>
                                                <th>Destination Addresses</th>
                                                <th>Destination Ports</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>â•</td>
                                                <td><code>allow-web-secure</code></td>
                                                <td><code>ğŸ”—&nbsp;TCP</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.1.0/24</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.3.0/24</code></td>
                                                <td><code>ğŸ”Œ&nbsp;443</code></td>
                                                <td><code>Secure web</code></td>
                                            </tr>
                                            <tr>
                                                <td>â•</td>
                                                <td><code>allow-log-ingest</code></td>
                                                <td><code>ğŸ”—&nbsp;TCP</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.4.0/24</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.5.0/24</code></td>
                                                <td><code>ğŸ”Œ&nbsp;8080</code></td>
                                                <td><code>Log ingestion</code></td>
                                            </tr>
                                            <tr>
                                                <td>â•</td>
                                                <td><code>allow-icmp-ping</code></td>
                                                <td><code>ğŸ“¡&nbsp;ICMP</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.1.0/24</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.4.0/24</code></td>
                                                <td><code>âœ³ï¸</code></td>
                                                <td><code>ICMP ping for network diagnostics</code></td>
                                            </tr>
                                            <tr>
                                                <td>ğŸ”„</td>
                                                <td><code>allow-dns</code></td>
                                                <td>ğŸ“¨&nbsp;UDP</td>
                                                <td><code style="display:block; white-space:normal; padding:0; margin:0"><span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">- ğŸŒ&nbsp;10.1.1.0/24</span><br/><span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">+ ğŸŒ&nbsp;10.1.1.0/24<span style="background-color: #acf2bd; color: #24292e; display:inline-block">, ğŸŒ&nbsp;10.1.2.0/24</span></span></code></td>
                                                <td>ğŸŒ&nbsp;168.63.129.16</td>
                                                <td>ğŸ”Œ&nbsp;53</td>
                                                <td><code>DNS to Azure</code></td>
                                            </tr>
                                            <tr>
                                                <td>ğŸ”„</td>
                                                <td><code>allow-api</code></td>
                                                <td>ğŸ”—&nbsp;TCP</td>
                                                <td>ğŸŒ&nbsp;10.1.1.0/24</td>
                                                <td><code style="display:block; white-space:normal; padding:0; margin:0"><span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">- ğŸŒ&nbsp;10.<span style="background-color: #ffc0c0; color: #24292e; display:inline-block">1</span>.2.0/24</span><br/><span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">+ ğŸŒ&nbsp;10.<span style="background-color: #acf2bd; color: #24292e; display:inline-block">2</span>.2.0/24</span></code></td>
                                                <td><code style="display:block; white-space:normal; padding:0; margin:0"><span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">- ğŸ”Œ&nbsp;8443</span><br/><span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0">+ ğŸ”Œ&nbsp;8443<span style="background-color: #acf2bd; color: #24292e; display:inline-block">, ğŸ”Œ&nbsp;9443</span></span></code></td>
                                                <td><code>API tier</code></td>
                                            </tr>
                                            <tr>
                                                <td>âŒ</td>
                                                <td><code>allow-web</code></td>
                                                <td><code>ğŸ”—&nbsp;TCP</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.1.0/24</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.3.0/24</code></td>
                                                <td><code>ğŸ”Œ&nbsp;80</code></td>
                                                <td><code>Legacy HTTP</code></td>
                                            </tr>
                                            <tr>
                                                <td>âºï¸</td>
                                                <td><code>allow-monitoring</code></td>
                                                <td><code>ğŸ”—&nbsp;TCP</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.1.0/24</code></td>
                                                <td><code>ğŸŒ&nbsp;10.1.4.0/24</code></td>
                                                <td><code>ğŸ”Œ&nbsp;443</code></td>
                                                <td><code>Monitoring</code></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="view-pane source-view">
                                    <pre><code>### ğŸ”„ module.network.azurerm_firewall_network_rule_collection.network_rules

**Collection:** `network-rules` | **Priority:** `120` | **Action:** `âœ… Allow`

#### Rule Changes

| Change | Rule Name | Protocols | Source Addresses | Destination Addresses | Destination Ports | Description |
| -------- | ----------- | ----------- | ------------------ | ---------------------- | ------------------- | ------------- |
| â• | `allow-web-secure` | `ğŸ”— TCP` | `ğŸŒ 10.1.1.0/24` | `ğŸŒ 10.1.3.0/24` | `ğŸ”Œ 443` | `Secure web` |
| â• | `allow-log-ingest` | `ğŸ”— TCP` | `ğŸŒ 10.1.4.0/24` | `ğŸŒ 10.1.5.0/24` | `ğŸ”Œ 8080` | `Log ingestion` |
| â• | `allow-icmp-ping` | `ğŸ“¡ ICMP` | `ğŸŒ 10.1.1.0/24` | `ğŸŒ 10.1.4.0/24` | `âœ³ï¸` | `ICMP ping for network diagnostics` |
| ğŸ”„ | `allow-dns` | ğŸ“¨ UDP | &lt;code style="display:block; white-space:normal; padding:0; margin:0;"&gt;&lt;span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;- ğŸŒ 10.1.1.0/24&lt;/span&gt;&lt;br&gt;&lt;span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;+ ğŸŒ 10.1.1.0/24&lt;span style="background-color: #acf2bd; color: #24292e;"&gt;, ğŸŒ 10.1.2.0/24&lt;/span&gt;&lt;/span&gt;&lt;/code&gt; | ğŸŒ 168.63.129.16 | ğŸ”Œ 53 | `DNS to Azure` |
| ğŸ”„ | `allow-api` | ğŸ”— TCP | ğŸŒ 10.1.1.0/24 | &lt;code style="display:block; white-space:normal; padding:0; margin:0;"&gt;&lt;span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;- ğŸŒ 10.&lt;span style="background-color: #ffc0c0; color: #24292e;"&gt;1&lt;/span&gt;.2.0/24&lt;/span&gt;&lt;br&gt;&lt;span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;+ ğŸŒ 10.&lt;span style="background-color: #acf2bd; color: #24292e;"&gt;2&lt;/span&gt;.2.0/24&lt;/span&gt;&lt;/code&gt; | &lt;code style="display:block; white-space:normal; padding:0; margin:0;"&gt;&lt;span style="background-color: #fff5f5; border-left: 3px solid #d73a49; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;- ğŸ”Œ 8443&lt;/span&gt;&lt;br&gt;&lt;span style="background-color: #f0fff4; border-left: 3px solid #28a745; color: #24292e; display: inline-block; padding-left: 8px; margin-left: 0;"&gt;+ ğŸ”Œ 8443&lt;span style="background-color: #acf2bd; color: #24292e;"&gt;, ğŸ”Œ 9443&lt;/span&gt;&lt;/span&gt;&lt;/code&gt; | `API tier` |
| âŒ | `allow-web` | `ğŸ”— TCP` | `ğŸŒ 10.1.1.0/24` | `ğŸŒ 10.1.3.0/24` | `ğŸ”Œ 80` | `Legacy HTTP` |
| âºï¸ | `allow-monitoring` | `ğŸ”— TCP` | `ğŸŒ 10.1.1.0/24` | `ğŸŒ 10.1.4.0/24` | `ğŸ”Œ 443` | `Monitoring` |</code></pre>
                                </div>
                            </div>
                        </div>
                        <p class="comparison-note">Crystal clear: 3 added, 2 changed, 1 removed, 1 unchanged.</p>
                    </div>
                </div>

                <div class="feature-highlights">
                    <h3 class="highlights-title">Key Features</h3>
                    <ul class="highlights-list">
                        <li>Shows add/change/delete/unchanged status for each rule</li>
                        <li>Displays all rule properties in a scannable table</li>
                        <li>Works for all <code>azurerm_firewall_network_rule_collection</code> and <code>azurerm_firewall_application_rule_collection</code> resources</li>
                        <li>Automatically appliedâ€”no configuration needed</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="section" style="background: var(--color-surface);">
        <div class="section-container">
            <div class="feature-detail">
                <div class="feature-detail-header">
                    <h2 class="feature-detail-title">Learn More</h2>
                </div>
                <p class="feature-detail-description">
                    This feature uses resource-specific templates to provide inline diffing for firewall rules.
                </p>
                <div class="feature-highlights">
                    <h3 class="highlights-title">Related Documentation</h3>
                    <ul class="highlights-list">
                        <li><a href="https://github.com/oocx/tfplan2md/tree/main/docs/features/002-firewall-rule-before-after-display" target="_blank" rel="noopener noreferrer">Feature Specification: Firewall Rule Display</a></li>
                        <li><a href="https://github.com/oocx/tfplan2md/tree/main/docs/features/001-resource-specific-templates" target="_blank" rel="noopener noreferrer">Resource-Specific Templates Architecture</a></li>
                        <li><a href="../docs.html#templates">Template Customization Guide</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4 class="footer-heading">Product</h4>
                    <a href="../features/index.html" class="footer-link">Features</a>
                    <a href="../getting-started.html" class="footer-link">Get Started</a>
                    <a href="../docs.html" class="footer-link">Documentation</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Resources</h4>
                    <a href="https://github.com/oocx/tfplan2md" class="footer-link">GitHub</a>
                    <a href="https://hub.docker.com/r/oocx/tfplan2md" class="footer-link">Docker Hub</a>
                    <a href="../examples.html" class="footer-link">Examples</a>
                    <a href="../architecture.html" class="footer-link">Architecture</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Community</h4>
                    <a href="https://github.com/oocx/tfplan2md/issues" class="footer-link">Issues</a>
                    <a href="../contributing.html" class="footer-link">Contributing</a>
                    <a href="https://github.com/oocx/tfplan2md/blob/main/LICENSE" class="footer-link">License</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">Â© 2025 tfplan2md â€¢ MIT License</p>
                <p class="footer-note">Built 100% with GitHub Copilot</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu functionality
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                mobileMenuBtn.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !mobileMenuBtn.contains(e.target) && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                }
            });
        }

        // Theme toggle functionality
        const themeToggle = document.querySelector('.theme-toggle');
        const html = document.documentElement;
        
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateThemeButton(currentTheme);
        
        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButton(newTheme);
        });
        
        function updateThemeButton(theme) {
            const label = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
            themeToggle.setAttribute('aria-label', label);
            themeToggle.setAttribute('title', label);
        }

        // Load interactive examples functionality from shared module
        // See ../assets/js/interactive-examples.js for implementation
    </script>
    <script src="../assets/js/interactive-examples.js"></script>
</body>
</html>