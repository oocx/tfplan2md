# EditorConfig is awesome: https://EditorConfig.org

# top-most EditorConfig file
root = true

# Default settings for all files
[*]
indent_style = space
indent_size = 4
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

# YAML files
[*.{yml,yaml}]
indent_size = 2

# JSON files
[*.json]
indent_size = 2

# Test files - Relax some analyzer rules  
[{src/tests/**/*.cs,tests/**/*.cs}]
# S112: Generic exceptions acceptable in test code
dotnet_diagnostic.S112.severity = suggestion
# S1066: Nested if statements acceptable in test assertions
dotnet_diagnostic.S1066.severity = suggestion
# S1075: Hardcoded paths acceptable in test data
dotnet_diagnostic.S1075.severity = suggestion
# S1144: Test helper methods may appear unused (used via reflection/dynamic)
dotnet_diagnostic.S1144.severity = suggestion
# S1481: Unused variables acceptable for test readability
dotnet_diagnostic.S1481.severity = suggestion
# S2589: Always-true conditions acceptable in defensive test code
dotnet_diagnostic.S2589.severity = suggestion
# S3236: Caller information attributes acceptable in test helpers
dotnet_diagnostic.S3236.severity = suggestion
# S3267: LINQ simplification not required in test code (readability over conciseness)
dotnet_diagnostic.S3267.severity = suggestion
# S3878: Array creation syntax acceptable for test clarity
dotnet_diagnostic.S3878.severity = suggestion
# S4144: Identical methods acceptable in tests (test isolation over DRY)
dotnet_diagnostic.S4144.severity = suggestion
# S5445: Path.GetTempFileName acceptable in tests
dotnet_diagnostic.S5445.severity = suggestion
# S6603: Collection-specific methods not required in tests
dotnet_diagnostic.S6603.severity = suggestion
# S6605: Collection-specific methods not required in tests
dotnet_diagnostic.S6605.severity = suggestion

# Markdown files
[*.md]
indent_size = 2

# Markdown files
[*.md]
trim_trailing_whitespace = false

# XML and project files
[*.{xml,csproj,props,targets,slnx}]
indent_size = 2

# C# files
[*.cs]
# Organize usings
dotnet_sort_system_directives_first = true
dotnet_separate_import_directive_groups = false

# this. preferences
dotnet_style_qualification_for_field = false:warning
dotnet_style_qualification_for_property = false:warning
dotnet_style_qualification_for_method = false:warning
dotnet_style_qualification_for_event = false:warning

# Language keywords vs BCL types preferences
dotnet_style_predefined_type_for_locals_parameters_members = true:warning
dotnet_style_predefined_type_for_member_access = true:warning

# Parentheses preferences
dotnet_style_parentheses_in_arithmetic_binary_operators = always_for_clarity:silent
dotnet_style_parentheses_in_relational_binary_operators = always_for_clarity:silent
dotnet_style_parentheses_in_other_binary_operators = always_for_clarity:silent
dotnet_style_parentheses_in_other_operators = never_if_unnecessary:silent

# Modifier preferences
dotnet_style_require_accessibility_modifiers = for_non_interface_members:warning
dotnet_style_readonly_field = true:warning

# Expression-level preferences
dotnet_style_object_initializer = true:suggestion
dotnet_style_collection_initializer = true:suggestion
dotnet_style_explicit_tuple_names = true:warning
dotnet_style_null_propagation = true:suggestion
dotnet_style_coalesce_expression = true:suggestion
dotnet_style_prefer_is_null_check_over_reference_equality_method = true:suggestion
dotnet_style_prefer_inferred_tuple_names = true:suggestion
dotnet_style_prefer_inferred_anonymous_type_member_names = true:suggestion
dotnet_style_prefer_auto_properties = true:suggestion
dotnet_style_prefer_conditional_expression_over_assignment = true:silent
dotnet_style_prefer_conditional_expression_over_return = true:silent
dotnet_style_prefer_simplified_interpolation = true:suggestion
dotnet_style_prefer_simplified_boolean_expressions = true:suggestion

# Named arguments preferences
csharp_style_prefer_named_arguments = true:suggestion

# var preferences
csharp_style_var_for_built_in_types = true:warning
csharp_style_var_when_type_is_apparent = true:warning
csharp_style_var_elsewhere = true:warning

# Expression-bodied members
csharp_style_expression_bodied_methods = when_on_single_line:suggestion
csharp_style_expression_bodied_constructors = when_on_single_line:suggestion
csharp_style_expression_bodied_operators = when_on_single_line:suggestion
csharp_style_expression_bodied_properties = when_on_single_line:suggestion
csharp_style_expression_bodied_indexers = when_on_single_line:suggestion
csharp_style_expression_bodied_accessors = when_on_single_line:suggestion
csharp_style_expression_bodied_lambdas = when_on_single_line:suggestion
csharp_style_expression_bodied_local_functions = when_on_single_line:suggestion

# Pattern matching preferences
csharp_style_pattern_matching_over_is_with_cast_check = true:suggestion
csharp_style_pattern_matching_over_as_with_null_check = true:suggestion
csharp_style_prefer_switch_expression = true:suggestion
csharp_style_prefer_pattern_matching = true:suggestion
csharp_style_prefer_not_pattern = true:suggestion

# Null-checking preferences
csharp_style_throw_expression = true:suggestion
csharp_style_conditional_delegate_call = true:suggestion

# Code-block preferences
csharp_prefer_braces = true:warning
csharp_prefer_simple_using_statement = true:suggestion

# 'using' directive preferences
csharp_using_directive_placement = outside_namespace:warning

# Modifier preferences
csharp_prefer_static_local_function = true:suggestion
csharp_preferred_modifier_order = public,private,protected,internal,file,static,extern,new,virtual,abstract,sealed,override,readonly,unsafe,required,volatile,async:warning

# New line preferences
csharp_style_namespace_declarations = file_scoped:warning
csharp_style_prefer_top_level_statements = true:suggestion

# Formatting rules
csharp_new_line_before_open_brace = all
csharp_new_line_before_else = true
csharp_new_line_before_catch = true
csharp_new_line_before_finally = true
csharp_new_line_before_members_in_object_initializers = true
csharp_new_line_before_members_in_anonymous_types = true
csharp_new_line_between_query_expression_clauses = true

# Indentation preferences
csharp_indent_case_contents = true
csharp_indent_switch_labels = true
csharp_indent_labels = one_less_than_current
csharp_indent_block_contents = true
csharp_indent_braces = false
csharp_indent_case_contents_when_block = true

# Space preferences
csharp_space_after_cast = false
csharp_space_after_keywords_in_control_flow_statements = true
csharp_space_between_parentheses = false
csharp_space_before_colon_in_inheritance_clause = true
csharp_space_after_colon_in_inheritance_clause = true
csharp_space_around_binary_operators = before_and_after
csharp_space_between_method_declaration_parameter_list_parentheses = false
csharp_space_between_method_declaration_empty_parameter_list_parentheses = false
csharp_space_between_method_declaration_name_and_open_parenthesis = false
csharp_space_between_method_call_parameter_list_parentheses = false
csharp_space_between_method_call_empty_parameter_list_parentheses = false
csharp_space_between_method_call_name_and_opening_parenthesis = false
csharp_space_after_comma = true
csharp_space_before_comma = false
csharp_space_after_dot = false
csharp_space_before_dot = false
csharp_space_after_semicolon_in_for_statement = true
csharp_space_before_semicolon_in_for_statement = false
csharp_space_around_declaration_statements = false
csharp_space_before_open_square_brackets = false
csharp_space_between_empty_square_brackets = false
csharp_space_between_square_brackets = false

# Wrapping preferences
csharp_preserve_single_line_statements = false
csharp_preserve_single_line_blocks = true

# IDE0055: Fix formatting - enforces all formatting rules
dotnet_diagnostic.IDE0055.severity = warning

# IDE0052: Remove unread private member
dotnet_diagnostic.IDE0052.severity = warning

# IDE0059: Unnecessary assignment to a value
dotnet_diagnostic.IDE0059.severity = warning

# IDE0060: Remove unused parameter
dotnet_diagnostic.IDE0060.severity = warning

# CA1822: Mark members as static - suppress for public members (design choice for DI/testability)
dotnet_diagnostic.CA1822.severity = suggestion

# IDE1006: Naming rule violations
dotnet_diagnostic.IDE1006.severity = warning

# Naming conventions
dotnet_naming_rule.interface_should_be_begins_with_i.severity = warning
dotnet_naming_rule.interface_should_be_begins_with_i.symbols = interface
dotnet_naming_rule.interface_should_be_begins_with_i.style = begins_with_i

dotnet_naming_rule.types_should_be_pascal_case.severity = warning
dotnet_naming_rule.types_should_be_pascal_case.symbols = types
dotnet_naming_rule.types_should_be_pascal_case.style = pascal_case

dotnet_naming_rule.non_field_members_should_be_pascal_case.severity = warning
dotnet_naming_rule.non_field_members_should_be_pascal_case.symbols = non_field_members
dotnet_naming_rule.non_field_members_should_be_pascal_case.style = pascal_case

# Static readonly fields are treated as constants and use PascalCase
dotnet_naming_rule.static_readonly_fields_should_be_pascal_case.severity = warning
dotnet_naming_rule.static_readonly_fields_should_be_pascal_case.symbols = static_readonly_field
dotnet_naming_rule.static_readonly_fields_should_be_pascal_case.style = pascal_case

dotnet_naming_rule.private_or_internal_field_should_be_underscore_camel_case.severity = warning
dotnet_naming_rule.private_or_internal_field_should_be_underscore_camel_case.symbols = private_or_internal_field
dotnet_naming_rule.private_or_internal_field_should_be_underscore_camel_case.style = underscore_camel_case

dotnet_naming_rule.constant_should_be_pascal_case.severity = warning
dotnet_naming_rule.constant_should_be_pascal_case.symbols = constant
dotnet_naming_rule.constant_should_be_pascal_case.style = pascal_case

dotnet_naming_rule.local_variables_should_be_camel_case.severity = warning
dotnet_naming_rule.local_variables_should_be_camel_case.symbols = local_variables
dotnet_naming_rule.local_variables_should_be_camel_case.style = camel_case

dotnet_naming_rule.parameters_should_be_camel_case.severity = warning
dotnet_naming_rule.parameters_should_be_camel_case.symbols = parameters
dotnet_naming_rule.parameters_should_be_camel_case.style = camel_case

dotnet_naming_symbols.interface.applicable_kinds = interface
dotnet_naming_symbols.interface.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_symbols.types.applicable_kinds = class, struct, interface, enum
dotnet_naming_symbols.types.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_symbols.non_field_members.applicable_kinds = property, event, method
dotnet_naming_symbols.non_field_members.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_symbols.static_readonly_field.applicable_kinds = field
dotnet_naming_symbols.static_readonly_field.applicable_accessibilities = internal, private, private_protected
dotnet_naming_symbols.static_readonly_field.required_modifiers = static, readonly

dotnet_naming_symbols.private_or_internal_field.applicable_kinds = field
dotnet_naming_symbols.private_or_internal_field.applicable_accessibilities = internal, private, private_protected

dotnet_naming_symbols.constant.applicable_kinds = field
dotnet_naming_symbols.constant.required_modifiers = const

dotnet_naming_symbols.local_variables.applicable_kinds = local
dotnet_naming_symbols.local_variables.applicable_accessibilities = *

dotnet_naming_symbols.parameters.applicable_kinds = parameter
dotnet_naming_symbols.parameters.applicable_accessibilities = *

dotnet_naming_style.begins_with_i.required_prefix = I
dotnet_naming_style.begins_with_i.capitalization = pascal_case

dotnet_naming_style.pascal_case.capitalization = pascal_case

dotnet_naming_style.camel_case.capitalization = camel_case

dotnet_naming_style.underscore_camel_case.required_prefix = _
dotnet_naming_style.underscore_camel_case.capitalization = camel_case

# ========================================
# StyleCop.Analyzers Rules
# ========================================
# Phase 1: Documentation and code consistency
# Start all rules as warnings, promote critical rules to errors after violations fixed
# Reference: https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/

# SA0001: XML comment analysis disabled - Enable XML documentation
dotnet_diagnostic.SA0001.severity = none

# SA1101: Prefix local calls with this
# Disabled - conflicts with project convention (dotnet_style_qualification_for_* = false)
dotnet_diagnostic.SA1101.severity = none

# SA1108: Block statements should not contain embedded comments
dotnet_diagnostic.SA1108.severity = suggestion

# SA1117: Parameters should be on same line or separate lines
dotnet_diagnostic.SA1117.severity = suggestion

# SA1122: Use string.Empty for empty strings
dotnet_diagnostic.SA1122.severity = suggestion

# SA1111: Closing parenthesis should be on line of last parameter
dotnet_diagnostic.SA1111.severity = suggestion

# SA1116: The parameters should begin on the line after declaration when spanning multiple lines
dotnet_diagnostic.SA1116.severity = suggestion

# SA1118: The parameter spans multiple lines
dotnet_diagnostic.SA1118.severity = suggestion

# SA1124: Do not use regions
dotnet_diagnostic.SA1124.severity = none

# SA1128: Put constructor initializers on their own line
dotnet_diagnostic.SA1128.severity = suggestion

# SA1201: Element ordering (constructor, property, method)
dotnet_diagnostic.SA1201.severity = suggestion

# SA1202: Public members should come before private members
dotnet_diagnostic.SA1202.severity = suggestion

# SA1203: Constant fields should appear before non-constant fields
dotnet_diagnostic.SA1203.severity = suggestion

# SA1204: Static members should appear before non-static members
dotnet_diagnostic.SA1204.severity = suggestion

# SA1316: Tuple element names should use correct casing
dotnet_diagnostic.SA1316.severity = warning

# SA1311: Static readonly fields should begin with upper-case letter
# Relaxed - static readonly field naming varies by context (test fixtures, etc.)
dotnet_diagnostic.SA1311.severity = suggestion

# SA1312: Variable names should begin with lower-case letter
# Relaxed - C# discard pattern uses '_' which is intentional
dotnet_diagnostic.SA1312.severity = none

# SA1402: File may only contain a single type
# Relaxed - project uses multiple related types per file (records, enums)
dotnet_diagnostic.SA1402.severity = suggestion

# SA1649: File name should match first type name
# Relaxed due to SA1402 - multiple types per file is intentional
dotnet_diagnostic.SA1649.severity = suggestion

# SA1308: Field names should not begin with prefix 's_'
# Relaxed - static field naming convention varies
dotnet_diagnostic.SA1308.severity = none

# SA1309: Field names should not begin with underscore
# Disabled - project convention uses _camelCase for private fields
dotnet_diagnostic.SA1309.severity = none

# SA1413: Use trailing comma in multi-line initializers
dotnet_diagnostic.SA1413.severity = suggestion

# SA1600: Elements should be documented
# Primary documentation rule - promoted to error after all violations fixed
dotnet_diagnostic.SA1600.severity = error

# SA1601: Partial elements should be documented
dotnet_diagnostic.SA1601.severity = error

# SA1602: Enumeration items should be documented
dotnet_diagnostic.SA1602.severity = error

# SA1633: File should have header
# Disabled - project doesn't use file headers
dotnet_diagnostic.SA1633.severity = none

# Documentation Rules - Default to warning
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.DocumentationRules.severity = warning

# Ordering Rules - Default to warning
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.OrderingRules.severity = warning

# Naming Rules - Default to warning (except SA1309 disabled above)
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.NamingRules.severity = warning

# Maintainability Rules - Default to warning
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.MaintainabilityRules.severity = warning

# Layout Rules - Default to suggestion (formatting not critical)
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.LayoutRules.severity = suggestion

# Readability Rules - Default to warning
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.ReadabilityRules.severity = warning

# Spacing Rules - Default to suggestion (formatting not critical)
dotnet_analyzer_diagnostic.category-StyleCop.CSharp.SpacingRules.severity = suggestion

################################################################################
# SonarAnalyzer.CSharp Rules (Phase 2)
################################################################################

# Reference: https://rules.sonarsource.com/csharp/
# Strategy: Start all rules as suggestions/warnings, promote critical rules to errors after fixes
# Note: TreatWarningsAsErrors=true in Directory.Build.props means warnings fail builds

# Global default for SonarAnalyzer rules - set to suggestion initially
# This allows build to pass while we triage and fix violations
dotnet_analyzer_diagnostic.category-SonarAnalyzer.CSharp.severity = suggestion

# Critical rules that will be promoted to 'error' after violations are fixed (P2-T6)

# S1006: Method overloads with default parameter values should not overlap
# Critical: Can cause unexpected behavior with method overloads
dotnet_diagnostic.S1006.severity = warning

# S1066: Mergeable if statements should be combined
# Medium: Code readability - keep as warning for now
dotnet_diagnostic.S1066.severity = warning

# S1144: Unused private types or members should be removed
# Medium: Dead code detection - keep as warning
dotnet_diagnostic.S1144.severity = warning

# S1481: Unused local variables should be removed
# Critical: Indicates potential logic error - promoted to error (P2-T6)
dotnet_diagnostic.S1481.severity = error

# S2583: Conditionally executed code should be reachable
# Critical: Logic error - unreachable code paths - promote to error later
dotnet_diagnostic.S2583.severity = warning

# S2259: Null pointers should not be dereferenced
# Critical: Null reference errors - promoted to error (P2-T6)
# Note: Monitor for false positives with nullable reference types
dotnet_diagnostic.S2259.severity = error

# S3267: Loops should be simplified with LINQ
# Medium: Code simplification - keep as warning
dotnet_diagnostic.S3267.severity = warning

# S3358: Ternary operators should not be nested
# Medium: Code readability - keep as warning
dotnet_diagnostic.S3358.severity = warning

# S3400: Methods should not return constants
# Medium: Code design - keep as warning
dotnet_diagnostic.S3400.severity = warning

# S3459: Unassigned members should be removed
# Medium: Dead code detection - keep as warning
dotnet_diagnostic.S3459.severity = warning

# S3626: Jump statements should not be redundant
# Medium: Code simplification - keep as warning
dotnet_diagnostic.S3626.severity = warning

# S3871: Exception types should be "public"
# Medium: API design - keep as warning
dotnet_diagnostic.S3871.severity = warning

# S3923: Conditional operations should not always return the same value
# Critical: Logic error - promote to error later
dotnet_diagnostic.S3923.severity = warning

# S6602: "Find" method should be used instead of "FirstOrDefault"
# Medium: Performance - keep as warning
dotnet_diagnostic.S6602.severity = warning

# S6618: "string.Create" should be used instead of "FormattableString"
# Medium: Performance micro-optimization - set to suggestion for CLI tool
# Justification: string.Create is a performance micro-optimization that reduces readability
# For a CLI reporting tool, code clarity is more important than microsecond string allocation savings
dotnet_diagnostic.S6618.severity = suggestion

################################################################################
# Meziantou.Analyzer Rules (Phase 3)
################################################################################

# Reference: https://github.com/meziantou/Meziantou.Analyzer/blob/main/docs/README.md
# Strategy: Start all rules as warnings, promote critical rules to errors after violations fixed
# Focus: Best practices, performance patterns, StringComparison enforcement

# Global default for Meziantou.Analyzer rules - set to suggestion initially
# This prevents build failures while we triage and fix violations
# Will promote specific rules to warning/error after fixes complete (P3-T4, P3-T5, P3-T6)
dotnet_analyzer_diagnostic.category-Meziantou.Analyzer.severity = suggestion

# MA0002: IEqualityComparer<string> or IComparer<string> is missing
# Disabled: Application runs in Docker container with consistent culture (Invariant)
# Justification: tfplan2md is a console tool that runs in Docker without locale configuration.
# The container environment ensures consistent Invariant culture across all deployments.
# Culture-specific string operations would add code complexity without benefit.
# String comparisons in this codebase are for identifiers, not user-facing text.
dotnet_diagnostic.MA0002.severity = none

# MA0004: Use ConfigureAwait(false)
# Suggestion for console applications (no UI synchronization context)
# Justification: This is a console application with no synchronization context
# ConfigureAwait(false) adds no value and reduces readability in console apps
dotnet_diagnostic.MA0004.severity = suggestion

# MA0006: Use String.Equals instead of equality operator
# Disabled: Related to MA0002 - culture-specific behavior not applicable
# Justification: Same rationale as MA0002. Using == for string comparison is acceptable
# and more readable when culture-specific behavior is not required.
dotnet_diagnostic.MA0006.severity = none

# MA0008: Add StructLayoutAttribute
# Suggestion: Struct layout is a low-level optimization rarely needed
dotnet_diagnostic.MA0008.severity = suggestion

# MA0009: Add regex timeout
# Critical: Prevents ReDoS (Regular Expression Denial of Service) attacks
# Set to suggestion initially - will review each regex pattern and promote in P3-T6
dotnet_diagnostic.MA0009.severity = suggestion

# MA0011: IFormatProvider is missing
# Disabled: Application runs in Docker with consistent Invariant culture
# Justification: This application generates markdown/text output for technical use,
# not localized user-facing content. The Docker environment provides consistent
# Invariant culture. Adding IFormatProvider to every ToString/Format call would
# reduce readability without providing value in our deployment model.
dotnet_diagnostic.MA0011.severity = none

# MA0013: Types should not extend System.ApplicationException
# ApplicationException is obsolete design pattern
# Fix: Use Exception or custom exception base class
# Set to suggestion initially - will promote to warning in P3-T6
dotnet_diagnostic.MA0013.severity = suggestion

# MA0023: Add RegexOptions.ExplicitCapture
# Performance optimization for regex
# Set to suggestion initially - will promote to warning after fixes
dotnet_diagnostic.MA0023.severity = suggestion

# MA0048: File name must match type name
# Suggestion: Relaxed due to project convention of multiple types per file
# Conflicts with SA1402 (multiple types per file) which is intentional
dotnet_diagnostic.MA0048.severity = suggestion

# MA0051: Method is too long
# Enforces method length <60 lines for maintainability
# Set to suggestion initially - will suppress specific complex methods with justification
dotnet_diagnostic.MA0051.severity = suggestion

# MA0140: Both if and else branch have identical code
# Logic error - dead code or copy-paste mistake
# Set to suggestion initially - will fix or suppress with justification
dotnet_diagnostic.MA0140.severity = suggestion
