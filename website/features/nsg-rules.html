<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSG Rule Diffing - tfplan2md</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../index.html" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
                    
                    <img src="../assets/images/logo-full.svg" alt="tfplan2md" height="64">
                </a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle navigation menu">
                <span class="hamburger-icon"></span>
            </button>
                        <div class="nav-menu">
                <a href="../features/index.html" class="nav-item">Features</a>
                <a href="../getting-started.html" class="nav-item">Install</a>
                <a href="../docs.html" class="nav-item">Docs</a>
                <a href="../examples.html" class="nav-item">Examples</a>
                <a href="../providers/index.html" class="nav-item">Providers</a>
                <a href="../architecture.html" class="nav-item">Architecture</a>
                <a href="../ai-workflow.html" class="nav-item">AI Workflow</a>
                <a href="../contributing.html" class="nav-item">Contributing</a>
                <button class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                    <span class="theme-icon"></span>
                </button>
                <a href="https://github.com/oocx/tfplan2md" class="nav-item nav-cta">GitHub</a>
            </div>
        </div>
    </nav>

    <header class="hero hero-secondary">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Network Security Group Rule Diffing</h1>
                <p class="hero-subtitle">
                    NSG security rules are displayed with before/after comparison tables showing which rules changed in a single view.
                </p>
            </div>
        </div>
    </header>

    <section class="section">
        <div class="section-container">
            <div class="feature-detail">
                <div class="feature-detail-header">
                    <span class="feature-badge">azurerm</span>
                </div>
                <p class="feature-detail-description">
                    Reviewing changes to Network Security Groups (NSGs) can be tedious. tfplan2md aggregates changes to inline rules and standalone rule resources into a single, easy-to-read table.
                </p>
                
                <div class="feature-comparison">
                    <div class="comparison-column">
                        <h3 class="comparison-title">‚ùå Without tfplan2md</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Raw Terraform Output</span>
                            </div>
                            <div class="example-content">
                                <pre><code># module.network.azurerm_network_security_group.app must be replaced
-/+ resource "azurerm_network_security_group" "app" {
      name                = "nsg-app"
      # (2 unchanged attributes hidden)

    - security_rule {
        - access                     = "Allow" -> null
        - destination_address_prefix = "*" -> null
        - destination_port_range     = "80" -> null
        - direction                  = "Inbound" -> null
        - name                       = "allow-http" -> null
        - priority                   = 100 -> null
        - protocol                   = "Tcp" -> null
        - source_address_prefix      = "*" -> null
        - source_port_range          = "*" -> null
      }
    + security_rule {
        + access                     = "Allow"
        + destination_address_prefix = "*"
        + destination_port_range     = "443"
        + direction                  = "Inbound"
        + name                       = "allow-https"
        + priority                   = 100
        + protocol                   = "Tcp"
        + source_address_prefix      = "*"
        + source_port_range          = "*"
      }
    + security_rule {
        + access                     = "Deny"
        + description                = "Block RDP from internet"
        + destination_address_prefix = "*"
        + destination_port_range     = "3389"
        + direction                  = "Inbound"
        + name                       = "deny-rdp"
        + priority                   = 200
        + protocol                   = "Tcp"
        + source_address_prefix      = "*"
        + source_port_range          = "*"
      }
    + security_rule {
        + access                     = "Allow"
        + description                = "Allow outbound HTTPS"
        + destination_address_prefix = "*"
        + destination_port_range     = "443"
        + direction                  = "Outbound"
        + name                       = "allow-outbound-https"
        + priority                   = 300
        + protocol                   = "Tcp"
        + source_address_prefix      = "*"
        + source_port_range          = "*"
      }
  }</code></pre>
                        </div>
                    </div>
                    <p class="comparison-note">Hard to scan‚Äîrules are scattered across the diff with all fields shown.</p>
                </div>
                
                <div class="comparison-column">
                        <h3 class="comparison-title">‚úÖ With tfplan2md</h3>
                        <div class="code-block interactive-example">
                            <div class="code-header">
                                <span class="code-title">Network Security Group Output</span>
                                <div class="example-controls">
                                    <div class="view-toggle">
                                        <button class="toggle-btn active" data-view="rendered">Rendered</button>
                                        <button class="toggle-btn" data-view="source">Source</button>
                                    </div>
                                    <button class="fullscreen-btn" aria-label="Toggle Fullscreen">‚õ∂</button>
                                </div>
                            </div>
                            <div class="example-content">
                                <div class="view-pane rendered-view active">
                                    <h3>‚ôªÔ∏è&nbsp;module.network.azurerm_network_security_group.app</h3>
                                    <p><strong>Network Security Group:</strong> <code>nsg-app</code></p>
                                    <h4>Security Rules</h4>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Change</th>
                                                <th>Name</th>
                                                <th>Priority</th>
                                                <th>Direction</th>
                                                <th>Access</th>
                                                <th>Protocol</th>
                                                <th>Source Addresses</th>
                                                <th>Source Ports</th>
                                                <th>Destination Addresses</th>
                                                <th>Destination Ports</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>‚ûï</td>
                                                <td><code>üÜî&nbsp;allow-https</code></td>
                                                <td><code>100</code></td>
                                                <td><code>‚¨áÔ∏è&nbsp;Inbound</code></td>
                                                <td><code>‚úÖ&nbsp;Allow</code></td>
                                                <td><code>üîó&nbsp;TCP</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>üîå&nbsp;443</code></td>
                                                <td><code>-</code></td>
                                            </tr>
                                            <tr>
                                                <td>‚ûï</td>
                                                <td><code>üÜî&nbsp;deny-rdp</code></td>
                                                <td><code>200</code></td>
                                                <td><code>‚¨áÔ∏è&nbsp;Inbound</code></td>
                                                <td><code>‚õî&nbsp;Deny</code></td>
                                                <td><code>üîó&nbsp;TCP</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>üîå&nbsp;3389</code></td>
                                                <td><code>Block RDP from internet</code></td>
                                            </tr>
                                            <tr>
                                                <td>‚ûï</td>
                                                <td><code>üÜî&nbsp;allow-outbound-https</code></td>
                                                <td><code>300</code></td>
                                                <td><code>‚¨ÜÔ∏è&nbsp;Outbound</code></td>
                                                <td><code>‚úÖ&nbsp;Allow</code></td>
                                                <td><code>üîó&nbsp;TCP</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>üîå&nbsp;443</code></td>
                                                <td><code>Allow outbound HTTPS</code></td>
                                            </tr>
                                            <tr>
                                                <td>‚ùå</td>
                                                <td><code>üÜî&nbsp;allow-http</code></td>
                                                <td><code>100</code></td>
                                                <td><code>‚¨áÔ∏è&nbsp;Inbound</code></td>
                                                <td><code>‚úÖ&nbsp;Allow</code></td>
                                                <td><code>üîó&nbsp;TCP</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>‚ú≥Ô∏è</code></td>
                                                <td><code>üîå&nbsp;80</code></td>
                                                <td><code>-</code></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="view-pane source-view">
                                    <pre><code>### ‚ôªÔ∏è¬†module.network.azurerm_network_security_group.app

**Network Security Group:** `nsg-app`

#### Security Rules

| Change | Name | Priority | Direction | Access | Protocol | Source Addresses | Source Ports | Destination Addresses | Destination Ports | Description |
| -------- | ------ | ---------- | ----------- | -------- | ---------- | ------------------ | ------------ | ---------------------- | ------------------- | ------------- |
| ‚ûï | `üÜî¬†allow-https` | `100` | `‚¨áÔ∏è¬†Inbound` | `‚úÖ¬†Allow` | `üîó¬†TCP` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `üîå¬†443` | `-` |
| ‚ûï | `üÜî¬†deny-rdp` | `200` | `‚¨áÔ∏è¬†Inbound` | `‚õî¬†Deny` | `üîó¬†TCP` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `üîå¬†3389` | `Block RDP from internet` |
| ‚ûï | `üÜî¬†allow-outbound-https` | `300` | `‚¨ÜÔ∏è¬†Outbound` | `‚úÖ¬†Allow` | `üîó¬†TCP` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `üîå¬†443` | `Allow outbound HTTPS` |
| ‚ùå | `üÜî¬†allow-http` | `100` | `‚¨áÔ∏è¬†Inbound` | `‚úÖ¬†Allow` | `üîó¬†TCP` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `‚ú≥Ô∏è` | `üîå¬†80` | `-` |</code></pre>
                                </div>
                            </div>
                        </div>
                        <p class="comparison-note">Clear table view: 3 rules added, 1 removed‚Äîeasy to review at a glance.</p>
                    </div>
                </div>

                <div class="feature-highlights">
                    <h3 class="highlights-title">Supported Resources</h3>
                    <ul class="highlights-list">
                        <li><code>azurerm_network_security_group</code> - Full NSG with inline rules</li>
                        <li><code>azurerm_network_security_rule</code> - Individual security rules</li>
                        <li>Shows priority, direction, access, protocol, sources, and destinations</li>
                        <li>Visual icons for IPs (üåê), ports (üîå), and protocols (üì®/üîó)</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="section" style="background: var(--color-surface);">
        <div class="section-container">
            <div class="feature-detail">
                <div class="feature-detail-header">
                    <h2 class="feature-detail-title">Learn More</h2>
                </div>
                <p class="feature-detail-description">
                    NSG rule diffing uses resource-specific templates to provide clear, table-based views of security rule changes.
                </p>
                <div class="feature-highlights">
                    <h3 class="highlights-title">Related Documentation</h3>
                    <ul class="highlights-list">
                        <li><a href="https://github.com/oocx/tfplan2md/tree/main/docs/features/016-nsg-security-rule-template" target="_blank" rel="noopener noreferrer">Feature Specification: NSG Security Rule Template</a></li>
                        <li><a href="https://github.com/oocx/tfplan2md/tree/main/docs/features/001-resource-specific-templates" target="_blank" rel="noopener noreferrer">Resource-Specific Templates Architecture</a></li>
                        <li><a href="../docs.html#templates">Template Customization Guide</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4 class="footer-heading">Product</h4>
                    <a href="../features/index.html" class="footer-link">Features</a>
                    <a href="../getting-started.html" class="footer-link">Get Started</a>
                    <a href="../docs.html" class="footer-link">Documentation</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Resources</h4>
                    <a href="https://github.com/oocx/tfplan2md" class="footer-link">GitHub</a>
                    <a href="https://hub.docker.com/r/oocx/tfplan2md" class="footer-link">Docker Hub</a>
                    <a href="../examples.html" class="footer-link">Examples</a>
                    <a href="../architecture.html" class="footer-link">Architecture</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Community</h4>
                    <a href="https://github.com/oocx/tfplan2md/issues" class="footer-link">Issues</a>
                    <a href="../contributing.html" class="footer-link">Contributing</a>
                    <a href="https://github.com/oocx/tfplan2md/blob/main/LICENSE" class="footer-link">License</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">¬© 2025 tfplan2md ‚Ä¢ MIT License</p>
                <p class="footer-note">Built 100% with GitHub Copilot</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu functionality
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                mobileMenuBtn.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !mobileMenuBtn.contains(e.target) && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                }
            });
        }

        // Theme toggle functionality
        const themeToggle = document.querySelector('.theme-toggle');
        const html = document.documentElement;
        
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateThemeButton(currentTheme);
        
        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButton(newTheme);
        });
        
        function updateThemeButton(theme) {
            const label = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
            themeToggle.setAttribute('aria-label', label);
            themeToggle.setAttribute('title', label);
        }

        // Load interactive examples functionality from shared module
        // See ../assets/js/interactive-examples.js for implementation
    </script>
    <script src="../assets/js/interactive-examples.js"></script>
</body>
</html>