<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tfplan2md - Transform Terraform Plans Into Readable Reports</title>
    <link rel="stylesheet" href="style.css">
    <!-- highlight.js themes - loaded based on current theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="highlight-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="highlight-dark" disabled>
    <style>
        /* Override highlight.js backgrounds to match code-tab-content */
        .code-tab-content .hljs,
        .code-tab-content pre code {
            background: transparent !important;
        }
        [data-theme="dark"] .code-tab-content .hljs {
            color: var(--code-text);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" class="brand-link">
                    <img src="assets/images/logo-full.svg" alt="tfplan2md" height="64" class="brand-logo-full">
                </a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle navigation menu">
                <span class="hamburger-icon"></span>
            </button>
                        <div class="nav-menu">
                <a href="features/index.html" class="nav-item">Features</a>
                <a href="getting-started.html" class="nav-item">Install</a>
                <a href="docs.html" class="nav-item">Docs</a>
                <a href="examples.html" class="nav-item">Examples</a>
                <a href="providers/index.html" class="nav-item">Providers</a>
                <a href="architecture.html" class="nav-item">Architecture</a>
                <a href="ai-workflow.html" class="nav-item">AI Workflow</a>
                <a href="contributing.html" class="nav-item">Contributing</a>
                <button class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                    <img src="assets/icons/dark-light-mode.svg" alt="Toggle theme" class="theme-icon">
                </button>
                <a href="https://github.com/oocx/tfplan2md" class="nav-item nav-cta">GitHub</a>
            </div>
        </div>
    </nav>

    <header class="hero hero-primary">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-badges">
                    <a href="getting-started.html" class="hero-badge">üê≥ Docker Ready</a>
                    <a href="https://github.com/oocx/tfplan2md/blob/main/LICENSE" class="hero-badge">üìÑ Free & Open Source</a>
                    <a href="ai-workflow.html" class="hero-badge">‚ú® Built 100% with GitHub Copilot</a>
                </div>
                <h1 class="hero-title">
                    Transform Terraform Plans Into <span class="hero-gradient">Readable Reports</span>
                </h1>
                <p class="hero-subtitle">
                    Stop drowning in verbose plan output. Generate structured Markdown reports that render perfectly in PR comments.
                </p>
            </div>
        </div>
    </header>

    <!-- Problem Section -->
    <section class="problem-section">
        <div class="section-container">
            <div class="section-header">
                <h2 class="section-title">The Pull Request Review Problem</h2>
                <p class="section-description">
                    Reviewing Terraform changes in PRs is painful with raw plan output
                </p>
            </div>
            <div class="problem-solution-layout">
                <div class="screenshot-side">
                    <div class="screenshot-container">
                        <div class="screenshot-header">Raw Terraform Plan</div>
                        <div class="screenshot-content">
<pre><code># azurerm_network_security_rule.security_rule[2] will be created
+ resource "azurerm_network_security_rule" "rule" {
  + access                     = "Allow"
  + destination_address_prefix = "10.0.0.0/8"
  + destination_port_range     = "22"
  + direction                  = "Inbound"
  + name                       = "ssh_from_corporate"
  + priority                   = 100
  + protocol                   = "Tcp"
  + source_address_prefix      = "10.0.0.0/8"
  + source_port_range          = "*"
  + resource_group_name        = "rg-network"
  + network_security_group_name = "nsg-prod"
  }

# azurerm_network_security_rule.security_rule[3] will be created
+ resource "azurerm_network_security_rule" "rule" {
  + access                     = "Deny"
  + destination_address_prefix = "*"
  + destination_port_range     = "3389"
...</code></pre>
                        </div>
                    </div>
                </div>
                
                <div class="list-side">
                    <ul class="problem-list">
                        <li>
                            <span class="x-icon">‚úó</span>
                            <div>
                                <strong>Wall of Text</strong>
                                <p>Raw plan output is overwhelming and difficult to scan</p>
                            </div>
                        </li>
                        <li>
                            <span class="x-icon">‚úó</span>
                            <div>
                                <strong>Lost Context</strong>
                                <p>Hard to understand what's actually changing and why</p>
                            </div>
                        </li>
                        <li>
                            <span class="x-icon">‚úó</span>
                            <div>
                                <strong>Mental Mapping</strong>
                                <p>Constantly mapping resource IDs to names in your head</p>
                            </div>
                        </li>
                        <li>
                            <span class="x-icon">‚úó</span>
                            <div>
                                <strong>Cryptic Diffs</strong>
                                <p>Index changes instead of semantic "what actually changed"</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution Section -->
    <section class="solution-section hero-secondary">
        <div class="section-container">
            <div class="section-header">
                <h2 class="section-title">tfplan2md Solves This</h2>
            </div>
            <div class="problem-solution-layout">
                <div class="list-side">
                    <ul class="solution-list">
                        <li>
                            <span class="check-icon">‚úì</span>
                            <div>
                                <strong>Security Changes as Readable Tables</strong>
                                <p>Firewall and NSG rules rendered with protocols, ports, and actions</p>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon">‚úì</span>
                            <div>
                                <strong>Friendly Names, Not GUIDs</strong>
                                <p>Principal IDs, role names, and scopes resolved to readable text</p>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon">‚úì</span>
                            <div>
                                <strong>Inline Diffs for Large Values</strong>
                                <p>Shows computed diffs for large values like JSON policies or scripts</p>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon">‚úì</span>
                            <div>
                                <strong>Optimized for PR Comments</strong>
                                <p>Designed and tested for GitHub and Azure DevOps rendering</p>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div class="screenshot-side">
                    <div class="screenshot-container">
                        <div class="screenshot-header">tfplan2md Report</div>
                        <div class="screenshot-content">
                            <img id="homepage-screenshot"
                                 src="assets/screenshots/firewall-example-crop.png" 
                                 srcset="assets/screenshots/firewall-example-crop.png 1x, assets/screenshots/firewall-example-crop@2x.png 2x"
                                 data-light1x="assets/screenshots/firewall-example-crop.png"
                                 data-light2x="assets/screenshots/firewall-example-crop@2x.png"
                                 data-dark1x="assets/screenshots/firewall-example-crop-dark.png"
                                 data-dark2x="assets/screenshots/firewall-example-crop-dark@2x.png"
                                 alt="tfplan2md firewall rules with inline diffs showing rule changes" 
                                 class="screenshot-clickable"
                                 onclick="openLightbox()"
                                 style="width: 100%; height: auto; display: block; border-radius: 4px;">
                            <p style="text-align: center; font-size: 14px; color: var(--color-text-secondary); margin-top: 8px; background: var(--code-bg); padding: 8px 0; margin-bottom: 0;">
                                Click to enlarge
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="install" class="install-section">
        <div class="section-container">
            <div class="install-card">
                <div class="install-content">
                    <h2 class="install-title">Get Started in Seconds</h2>
                    <p class="install-description">Run one command to convert your Terraform plan</p>
                    
                    <div class="install-row">
                        <div class="install-actions">
                            <a href="getting-started.html" class="btn btn-lg btn-white">Get Started</a>
                            <a href="examples.html" class="btn btn-lg btn-outline-white">View Examples</a>
                        </div>
                        
                        <div class="command-box">
                            <code>terraform show -json plan.tfplan | docker run -i oocx/tfplan2md</code>
                            <button class="copy-button" aria-label="Copy command to clipboard"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.5C5 2.67157 5.67157 2 6.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.3284 13.3284 11 12.5 11H11V12.5C11 13.3284 10.3284 14 9.5 14H3.5C2.67157 14 2 13.3284 2 12.5V6.5C2 5.67157 2.67157 5 3.5 5H5V3.5ZM6 5H9.5C10.3284 5 11 5.67157 11 6.5V10H12.5C12.7761 10 13 9.77614 13 9.5V3.5C13 3.22386 12.7761 3 12.5 3H6.5C6.22386 3 6 3.22386 6 3.5V5ZM3.5 6C3.22386 6 3 6.22386 3 6.5V12.5C3 12.7761 3.22386 13 3.5 13H9.5C9.77614 13 10 12.7761 10 12.5V6.5C10 6.22386 9.77614 6 9.5 6H3.5Z" fill="currentColor"/></svg></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="features-section">
        <div class="section-container">
            <div class="section-header centered">
                <h2 class="section-title">Powerful Features</h2>
                <p class="section-description">Everything you need for better Terraform PR reviews</p>
            </div>
            <div class="features-carousel">
                <button class="carousel-btn carousel-prev" aria-label="Previous features">‚Äπ</button>
                <div class="features-carousel-track">
                    <!-- Inline Diffs -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/semantic-diffs.svg" alt="Inline Diffs" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">Inline Diffs</h3>
                        <p class="feature-description">
                            Side-by-side "Before" and "After" values with inline highlighting show exactly what changed.
                        </p>
                        <a href="features/index.html#semantic-diffs" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- Firewall Rule Interpretation -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/firewall-rules.svg" alt="Firewall Rules" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">Firewall Rules</h3>
                        <p class="feature-description">
                            Azure Firewall rule collections rendered as readable tables with protocols, ports, and actions.
                        </p>
                        <a href="features/firewall-rules.html" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- NSG Rule Interpretation -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/nsg-rules.svg" alt="NSG Rules" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">NSG Rules</h3>
                        <p class="feature-description">
                            Network Security Group rules as readable tables, making security changes easy to audit.
                        </p>
                        <a href="features/nsg-rules.html" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- Role Assignment Mapping -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/role-assignment.svg" alt="Role Assignments" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">Role Assignments</h3>
                        <p class="feature-description">
                            Resolves cryptic Principal IDs, role names, and scopes to human-readable names.
                        </p>
                        <a href="features/azure-optimizations.html" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- Large Value Formatting -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/large-values.svg" alt="Large Values" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">Large Values</h3>
                        <p class="feature-description">
                            Multi-line values like JSON policies show computed diffs with inline highlighting.
                        </p>
                        <a href="features/large-values.html" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- Optimized for PR Comments -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/pr-compatibility.svg" alt="PR Compatibility" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">PR Optimized</h3>
                        <p class="feature-description">
                            Designed and tested for rendering in markdown pull requests on Azure DevOps & GitHub.
                        </p>
                        <a href="features/index.html#pr-compatibility" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>

                    <!-- Friendly Resource Names -->
                    <div class="feature-card elevated">
                        <div class="feature-header">
                            <img src="assets/icons/friendly-names.svg" alt="Friendly Names" class="feature-icon-lg">
                        </div>
                        <h3 class="feature-title">Friendly Names</h3>
                        <p class="feature-description">
                            Displays friendly names for resources instead of complex resource ID strings.
                        </p>
                        <a href="features/misc.html#friendly-names" class="feature-link-btn">Learn more ‚Üí</a>
                    </div>
                </div>
                <button class="carousel-btn carousel-next" aria-label="Next features">‚Ä∫</button>
            </div>
            <div class="carousel-dots"></div>
        </div>
    </section>

    <section class="cicd-section">
        <div class="section-container">
            <div class="cicd-content">
                <div class="cicd-text">
                    <h2 class="cicd-title">Perfect for CI/CD</h2>
                    <p class="cicd-description">
                        Integrate tfplan2md into your GitHub Actions, Azure Pipelines, 
                        or GitLab CI workflow. Automatically post plan reports as PR comments.
                    </p>
                    <a href="getting-started.html#cicd" class="btn btn-primary">View Integration Guides</a>
                </div>
                <div class="cicd-example">
                    <div class="code-window">
                        <div class="code-tabs">
                            <button class="code-tab active" data-tab="github-actions">GitHub Actions</button>
                            <button class="code-tab" data-tab="azure-pipelines">Azure Pipelines</button>
                        </div>
                        <div class="code-tab-content active" id="github-actions">
<pre><code class="language-yaml">- name: Generate markdown report
  run: |
    terraform show -json plan.tfplan | \
      docker run -i oocx/tfplan2md > plan.md

- name: Post PR comment
  uses: actions/github-script@v7
  with:
    script: |
      const fs = require('fs');
      const plan = fs.readFileSync('plan.md', 'utf8');
      
      github.rest.issues.createComment({
        issue_number: context.issue.number,
        owner: context.repo.owner,
        repo: context.repo.repo,
        body: plan
      });</code></pre>
                        </div>
                        <div class="code-tab-content" id="azure-pipelines">
<pre><code class="language-yaml">- script: terraform show -json plan.tfplan > plan.json
  displayName: 'Convert to JSON'
  workingDirectory: terraform

- script: |
    docker run -v $(pwd):/data oocx/tfplan2md \
      /data/plan.json --output /data/plan.md
  displayName: 'Generate markdown report'
  workingDirectory: terraform

- bash: |
    MARKDOWN=$(cat terraform/plan.md)
    URL="$(System.TeamFoundationCollectionUri)$(System.TeamProject)/_apis/git/repositories/$(Build.Repository.ID)/pullRequests/$(System.PullRequest.PullRequestId)/threads?api-version=7.0"
    
    BODY=$(jq -n \
      --arg content "$MARKDOWN" \
      '{comments: [{content: $content, commentType: 1}], status: 1}')
    
    curl -X POST "$URL" \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $(System.AccessToken)" \
      -d "$BODY"
  displayName: 'Post PR comment'</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4 class="footer-heading">Product</h4>
                    <a href="features/index.html" class="footer-link">Features</a>
                    <a href="getting-started.html" class="footer-link">Get Started</a>
                    <a href="docs.html" class="footer-link">Documentation</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Resources</h4>
                    <a href="https://github.com/oocx/tfplan2md" class="footer-link">GitHub</a>
                    <a href="https://hub.docker.com/r/oocx/tfplan2md" class="footer-link">Docker Hub</a>
                    <a href="examples.html" class="footer-link">Examples</a>
                    <a href="architecture.html" class="footer-link">Architecture</a>
                </div>
                <div class="footer-col">
                    <h4 class="footer-heading">Community</h4>
                    <a href="https://github.com/oocx/tfplan2md/issues" class="footer-link">Issues</a>
                    <a href="contributing.html" class="footer-link">Contributing</a>
                    <a href="https://github.com/oocx/tfplan2md/blob/main/LICENSE" class="footer-link">License</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">¬© 2025 tfplan2md ‚Ä¢ MIT License</p>
                <p class="footer-note">Built 100% with GitHub Copilot</p>
            </div>
        </div>
    </footer>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox-modal" onclick="closeLightbox()">
        <button class="lightbox-close" onclick="closeLightbox()" aria-label="Close lightbox">&times;</button>
        <img id="lightbox-img" class="lightbox-content" alt="Enlarged screenshot"
             data-light1x="assets/screenshots/firewall-example-lightbox.png"
             data-light2x="assets/screenshots/firewall-example-lightbox@2x.png"
             data-dark1x="assets/screenshots/firewall-example-lightbox-dark.png"
             data-dark2x="assets/screenshots/firewall-example-lightbox-dark@2x.png">
    </div>

    <script>
        // Mobile menu functionality
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('.nav-menu');
        
        mobileMenuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            mobileMenuBtn.classList.toggle('active');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navMenu.contains(e.target) && !mobileMenuBtn.contains(e.target) && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                mobileMenuBtn.classList.remove('active');
            }
        });

        // Theme toggle functionality
        const themeToggle = document.querySelector('.theme-toggle');
        const html = document.documentElement;
        
        // Check for saved theme preference or default to 'light'
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateThemeButton(currentTheme);
        // Update screenshots after a brief delay to ensure DOM is fully ready
        setTimeout(() => updateScreenshots(currentTheme), 0);
        
        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButton(newTheme);
            updateScreenshots(newTheme);
        });
        
        function updateThemeButton(theme) {
            const label = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
            themeToggle.setAttribute('aria-label', label);
            themeToggle.setAttribute('title', label);
        }

        function updateScreenshots(theme) {
            // Update all images with theme-aware srcsets
            document.querySelectorAll('img[data-light1x]').forEach(img => {
                const src1x = theme === 'dark' ? img.dataset.dark1x : img.dataset.light1x;
                const src2x = theme === 'dark' ? img.dataset.dark2x : img.dataset.light2x;
                img.src = src1x;
                img.srcset = `${src1x} 1x, ${src2x} 2x`;
            });
        }
        
        // Copy button functionality
        document.querySelectorAll('.copy-button').forEach(button => {
            button.addEventListener('click', () => {
                const code = button.previousElementSibling.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    button.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z" fill="currentColor"/>
                    </svg>`;
                    setTimeout(() => {
                        button.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 3.5C5 2.67157 5.67157 2 6.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.3284 13.3284 11 12.5 11H11V12.5C11 13.3284 10.3284 14 9.5 14H3.5C2.67157 14 2 13.3284 2 12.5V6.5C2 5.67157 2.67157 5 3.5 5H5V3.5ZM6 5H9.5C10.3284 5 11 5.67157 11 6.5V10H12.5C12.7761 10 13 9.77614 13 9.5V3.5C13 3.22386 12.7761 3 12.5 3H6.5C6.22386 3 6 3.22386 6 3.5V5ZM3.5 6C3.22386 6 3 6.22386 3 6.5V12.5C3 12.7761 3.22386 13 3.5 13H9.5C9.77614 13 10 12.7761 10 12.5V6.5C10 6.22386 9.77614 6 9.5 6H3.5Z" fill="currentColor"/>
                        </svg>`;
                    }, 2000);
                });
            });
        });

        // Carousel functionality
        const track = document.querySelector('.features-carousel-track');
        const slides = Array.from(track.children);
        const nextButton = document.querySelector('.carousel-next');
        const prevButton = document.querySelector('.carousel-prev');
        const dotsContainer = document.querySelector('.carousel-dots');
        
        let currentIndex = 0;
        let slidesPerView = 3;
        let slideGroups = Math.ceil(slides.length / slidesPerView);
        
        function calculateSlidesPerView() {
            if (window.innerWidth <= 768) {
                slidesPerView = 1;
            } else if (window.innerWidth <= 1024) {
                slidesPerView = 2;
            } else {
                slidesPerView = 3;
            }
            slideGroups = Math.ceil(slides.length / slidesPerView);
        }
        
        function createDots() {
            dotsContainer.innerHTML = '';
            for (let i = 0; i < slideGroups; i++) {
                const dot = document.createElement('button');
                dot.classList.add('carousel-dot');
                dot.setAttribute('aria-label', `Go to slide group ${i + 1}`);
                if (i === currentIndex) dot.classList.add('active');
                dotsContainer.appendChild(dot);
            }
            
            Array.from(dotsContainer.children).forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = index;
                    updateCarousel();
                });
            });
        }
        
        function updateCarousel() {
            const slideWidth = slides[0].offsetWidth + 24;
            const offset = currentIndex * slideWidth * slidesPerView;
            track.style.transform = `translateX(-${offset}px)`;
            
            Array.from(dotsContainer.children).forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
            
            prevButton.disabled = currentIndex === 0;
            nextButton.disabled = currentIndex === slideGroups - 1;
        }
        
        nextButton.addEventListener('click', () => {
            if (currentIndex < slideGroups - 1) {
                currentIndex++;
                updateCarousel();
            }
        });
        
        prevButton.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateCarousel();
            }
        });
        
        // Initialize and handle resize
        calculateSlidesPerView();
        createDots();
        updateCarousel();
        
        window.addEventListener('resize', () => {
            const oldSlidesPerView = slidesPerView;
            calculateSlidesPerView();
            if (oldSlidesPerView !== slidesPerView) {
                currentIndex = 0;
                createDots();
            }
            updateCarousel();
        });

        // Lightbox functionality
        function openLightbox() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const theme = html.getAttribute('data-theme');
            const src1x = theme === 'dark' ? lightboxImg.dataset.dark1x : lightboxImg.dataset.light1x;
            const src2x = theme === 'dark' ? lightboxImg.dataset.dark2x : lightboxImg.dataset.light2x;
            
            lightbox.classList.add('active');
            lightboxImg.src = src1x;
            lightboxImg.srcset = `${src1x} 1x, ${src2x} 2x`;
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close lightbox on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });

        // Simple Markdown Syntax Highlighter
        function highlightMarkdown() {
            document.querySelectorAll('.source-view code').forEach(block => {
                let html = block.innerHTML;
                
                // Comments
                html = html.replace(/(&lt;!--[\s\S]*?--&gt;)/g, '<span class="md-comment">$1</span>');
                
                // Headings
                html = html.replace(/^(#+ .+$)/gm, '<span class="md-heading">$1</span>');
                
                // Bold
                html = html.replace(/(\*\*.*?\*\*)/g, '<span class="md-bold">$1</span>');
                
                // Inline Code
                html = html.replace(/(`[^`]+`)/g, '<span class="md-code">$1</span>');
                
                // Links
                html = html.replace(/(\[.*?\]\(.*?\))/g, '<span class="md-link">$1</span>');
                
                // Lists
                html = html.replace(/^(\s*[-*+] )/gm, '<span class="md-list">$1</span>');
                
                block.innerHTML = html;
            });
        }

        highlightMarkdown();
    </script>
    
    <!-- highlight.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Apply syntax highlighting
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // CI/CD tabs functionality
            document.querySelectorAll('.code-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Update tab states
                    document.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update content states
                    document.querySelectorAll('.code-tab-content').forEach(c => c.classList.remove('active'));
                    document.getElementById(tabName).classList.add('active');
                });
            });
            
            // Toggle highlight.js theme based on site theme
            function toggleHighlightTheme(theme) {
                const lightTheme = document.getElementById('highlight-light');
                const darkTheme = document.getElementById('highlight-dark');
                if (theme === 'dark') {
                    lightTheme.disabled = true;
                    darkTheme.disabled = false;
                } else {
                    lightTheme.disabled = false;
                    darkTheme.disabled = true;
                }
            }
            
            // Initialize theme
            const initialTheme = document.documentElement.getAttribute('data-theme');
            toggleHighlightTheme(initialTheme);
            
            // Listen for theme changes
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.attributeName === 'data-theme') {
                        const theme = document.documentElement.getAttribute('data-theme');
                        toggleHighlightTheme(theme);
                    }
                });
            });
            
            observer.observe(document.documentElement, {
                attributes: true,
                attributeFilter: ['data-theme']
            });
        });
    </script>
</body>
</html>
