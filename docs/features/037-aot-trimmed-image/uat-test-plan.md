# UAT Test Plan: AOT-Compiled Trimmed Docker Image

## Goal
Verify that the NativeAOT-compiled version of `tfplan2md` renders reports correctly in GitHub and Azure DevOps PR comments, and that assembly metadata is preserved.

## Artifacts
**Artifact to use:** `artifacts/comprehensive-demo.md`

**Creation Instructions:**
- **Source Plan:** `src/tests/Oocx.TfPlan2Md.Tests/TestData/azurerm-azuredevops-plan.json`
- **Command:** `docker run --rm -i <aot-image-tag> < src/tests/Oocx.TfPlan2Md.Tests/TestData/azurerm-azuredevops-plan.json > artifacts/comprehensive-demo.md`
- **Rationale:** This plan exercises various Scriban templates (Summary, Azure, Azure DevOps, Tables) and helpers, which are higher-risk areas for trimming and reflection in an AOT environment.

## Test Steps
1. Build the AOT-compiled Docker image locally.
2. Generate the `artifacts/comprehensive-demo.md` using the AOT-built container.
3. Run UAT using the `UAT Tester` agent with this artifact.
4. Verify the generated PRs on GitHub and Azure DevOps.

## Validation Instructions (Test Description)
**Specific Resources/Sections:**
- **Report Summary Table**: Verify that the Add `‚ûï`, Change `üîÑ`, and Destroy `‚ùå` emojis render correctly.
- **Resource Details**: Locate `module.security.azurerm_key_vault_secret.audit_policy` and verify its attribute table renders values correctly.
- **Report Footer**: Verify the footer contains "Generated by tfplan2md v..." followed by a version number and a commit hash.

**Exact Attributes:**
- **Commit Hash**: Verify that the commit hash is a valid 40-character hex string (e.g., `8d2f3a...`) and corresponds to a recent commit on this branch.

**Expected Outcome:**
- The rendered markdown should matches the current quality and format of the baseline comprehensive demo.
- There should be no "Missing member" or "Error rendering template" messages in the output.
- The footer metadata (version and commit) must be present and correct (this specifically validates that assembly attribute reflection works in AOT).

**Before/After Context:**
- This feature replaces the standard .NET runtime image with a NativeAOT-compiled executable running on a chiseled base. The Docker image size should drop from ~200MB to ~30-50MB. This UAT ensures that this significant architectural change remains transparent to the user in terms of output quality.
