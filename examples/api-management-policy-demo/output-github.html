<h1 dir="auto">Terraform Plan Report</h1>
<p dir="auto">Generated by tfplan2md 1.0.0-alpha.24 (be64fe6) on 2026-01-10 14:15:33 UTC | Terraform 1.14.0</p>
<h2 dir="auto">Summary</h2>
<markdown-accessiblity-table data-catalyst=""><table role="table" tabindex="0">
<thead>
<tr>
<th>Action</th>
<th>Count</th>
<th>Resource Types</th>
</tr>
</thead>
<tbody>
<tr>
<td>‚ûï&nbsp;Add</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>üîÑ&nbsp;Change</td>
<td>1</td>
<td>1 azurerm_api_management_policy</td>
</tr>
<tr>
<td>‚ôªÔ∏è&nbsp;Replace</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>‚ùå&nbsp;Destroy</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>1</strong></td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h2 dir="auto">Resource Changes</h2>
<h3 dir="auto">üì¶&nbsp;Module: root</h3>
<details>
<summary>üîÑ&nbsp;azurerm_api_management_policy <b><code class="notranslate">global</code></b> ‚Äî | 1üîß&nbsp;xml_content</summary>
<br/>
<p dir="auto">Large values: xml_content (112 lines, 57 changed)</p>
<h5 dir="auto"><strong>xml_content:</strong></h5>
<pre><code class="notranslate">&lt;policies&gt;
  &lt;inbound&gt;
<span>-     &lt;!-- Rate limiting policy --&gt;</span>
<span>-     &lt;rate-limit calls=&quot;100&quot; renewal-period=&quot;60&quot; /&gt;</span>
<span>-     &lt;!-- <span>IP</span> <span>fi</span>lt<span>er</span>ing --&gt;</span>
<span>+     &lt;!-- <span>Rate</span> <span>limit</span>i<span>ng po</span>l<span>icy wi</span>t<span>h incr</span>e<span>ased lim</span>i<span>ts</span> --&gt;</span>
<span>+     &lt;rate-limit calls=&quot;200&quot; renewal-period=&quot;60&quot; /&gt;</span>
<span>+     &lt;!-- IP filtering with additional networks --&gt;</span>
    &lt;ip-filter action=&quot;allow&quot;&gt;
      &lt;address&gt;10.0.0.0/24&lt;/address&gt;
      &lt;address&gt;172.16.0.0/16&lt;/address&gt;
<span>+       &lt;address&gt;192.168.1.0/24&lt;/address&gt;</span>
    &lt;/ip-filter&gt;
<span>-     &lt;!-- CORS policy --&gt;</span>
<span>+     &lt;!-- CORS policy <span>with additional origins </span>--&gt;</span>
    &lt;cors allow-credentials=&quot;true&quot;&gt;
      &lt;allowed-origins&gt;
        &lt;origin&gt;https://example.com&lt;/origin&gt;
        &lt;origin&gt;https://app.example.com&lt;/origin&gt;
<span>+         &lt;origin&gt;https://portal.example.com&lt;/origin&gt;</span>
      &lt;/allowed-origins&gt;
      &lt;allowed-methods&gt;
        &lt;method&gt;GET&lt;/method&gt;
        &lt;method&gt;POST&lt;/method&gt;
        &lt;method&gt;PUT&lt;/method&gt;
        &lt;method&gt;DELETE&lt;/method&gt;
<span>+         &lt;method&gt;PATCH&lt;/method&gt;</span>
      &lt;/allowed-methods&gt;
      &lt;allowed-headers&gt;
        &lt;header&gt;Content-Type&lt;/header&gt;
        &lt;header&gt;Authorization&lt;/header&gt;
        &lt;header&gt;X-Requested-With&lt;/header&gt;
<span>+         &lt;header&gt;X-API-Key&lt;/header&gt;</span>
      &lt;/allowed-headers&gt;
    &lt;/cors&gt;
    &lt;!-- Authentication with Azure AD --&gt;
    &lt;validate-jwt header-name=&quot;Authorization&quot; failed-validation-httpcode=&quot;401&quot; failed-validation-error-message=&quot;Unauthorized&quot;&gt;
      &lt;openid-config url=&quot;https://login.microsoftonline.com/common/.well-known/openid-configuration&quot; /&gt;
      &lt;audiences&gt;
        &lt;audience&gt;api://12345678-1234-1234-1234-123456789abc&lt;/audience&gt;
      &lt;/audiences&gt;
      &lt;required-claims&gt;
        &lt;claim name=&quot;roles&quot; match=&quot;any&quot;&gt;
          &lt;value&gt;Reader&lt;/value&gt;
          &lt;value&gt;Writer&lt;/value&gt;
<span>+           &lt;value&gt;Admin&lt;/value&gt;</span>
        &lt;/claim&gt;
      &lt;/required-claims&gt;
    &lt;/validate-jwt&gt;
<span>-     &lt;!-- Set backend service URL --&gt;</span>
<span>-     &lt;<span>s</span>et<span>-</span>backend<span>-</span>service <span>base-url=&quot;ht</span>t<span>ps://back</span>end<span>-old.exam</span>p<span>le.c</span>o<span>m&quot;</span> <span>/</span>&gt;</span>
<span>+     &lt;<span>!-- S</span>et<span> </span>backend<span> </span>service <span>URL to n</span>e<span>w </span>endpo<span>int</span> <span>--</span>&gt;</span>
<span>+     &lt;set-backend-service base-url=&quot;https://backend-new.example.com&quot; /&gt;</span>
    &lt;!-- Add custom headers --&gt;
    &lt;set-header name=&quot;X-Environment&quot; exists-action=&quot;override&quot;&gt;
      &lt;value&gt;Production&lt;/value&gt;
    &lt;/set-header&gt;
    &lt;set-header name=&quot;X-Request-Id&quot; exists-action=&quot;override&quot;&gt;
      &lt;value&gt;@(Guid.NewGuid().ToString())&lt;/value&gt;
    &lt;/set-header&gt;
<span>+     &lt;set-header name=&quot;X-API-Version&quot; exists-action=&quot;override&quot;&gt;</span>
<span>+       &lt;value&gt;2.0&lt;/value&gt;</span>
<span>+     &lt;/set-header&gt;</span>
<span>+     &lt;!-- Request throttling per user --&gt;</span>
<span>+     &lt;quota-by-key calls=&quot;10000&quot; renewal-period=&quot;3600&quot; counter-key=&quot;@(context.Request.Headers.GetValueOrDefault(&amp;quot;Authorization&amp;quot;,&amp;quot;&amp;quot;))&quot; /&gt;</span>
  &lt;/inbound&gt;
  &lt;backend&gt;
    &lt;base /&gt;
<span>+     &lt;!-- Retry policy for backend failures --&gt;</span>
<span>+     &lt;retry condition=&quot;@(context.Response.StatusCode &amp;gt;= 500)&quot; count=&quot;3&quot; interval=&quot;2&quot; first-fast-retry=&quot;true&quot; /&gt;</span>
  &lt;/backend&gt;
  &lt;outbound&gt;
    &lt;base /&gt;
<span>-     &lt;!-- Response caching --&gt;</span>
<span>-     &lt;cach<span>e-s</span>t<span>o</span>r<span>e</span> d<span>u</span>r<span>ation=&quot;3600&quot;</span> <span>/</span>&gt;</span>
<span>+     &lt;<span>!-- Response </span>cach<span>ing wi</span>t<span>h va</span>r<span>y-by h</span>e<span>a</span>d<span>e</span>r<span>s</span> <span>--</span>&gt;</span>
<span>+     &lt;cache-store duration=&quot;3600&quot; vary-by-developer=&quot;false&quot; vary-by-developer-groups=&quot;false&quot;&gt;</span>
<span>+       &lt;vary-by-header&gt;Accept&lt;/vary-by-header&gt;</span>
<span>+       &lt;vary-by-header&gt;Accept-Encoding&lt;/vary-by-header&gt;</span>
<span>+     &lt;/cache-store&gt;</span>
    &lt;!-- Remove internal headers --&gt;
    &lt;set-header name=&quot;X-AspNet-Version&quot; exists-action=&quot;delete&quot; /&gt;
    &lt;set-header name=&quot;X-Powered-By&quot; exists-action=&quot;delete&quot; /&gt;
<span>+     &lt;!-- Add security headers --&gt;</span>
<span>+     &lt;set-header name=&quot;X-Content-Type-Options&quot; exists-action=&quot;override&quot;&gt;</span>
<span>+       &lt;value&gt;nosniff&lt;/value&gt;</span>
<span>+     &lt;/set-header&gt;</span>
<span>+     &lt;set-header name=&quot;X-Frame-Options&quot; exists-action=&quot;override&quot;&gt;</span>
<span>+       &lt;value&gt;DENY&lt;/value&gt;</span>
<span>+     &lt;/set-header&gt;</span>
  &lt;/outbound&gt;
  &lt;on-error&gt;
    &lt;base /&gt;
<span>-     &lt;!-- Log errors to Application Insights --&gt;</span>
<span>+     &lt;!-- Log errors to Application Insights <span>with additional context </span>--&gt;</span>
    &lt;trace source=&quot;policy-error&quot; severity=&quot;error&quot;&gt;
      &lt;message&gt;@(context.LastError.Message)&lt;/message&gt;
      &lt;metadata name=&quot;request-id&quot; value=&quot;@(context.RequestId)&quot; /&gt;
<span>+       &lt;metadata name=&quot;operation-name&quot; value=&quot;@(context.Operation.Name)&quot; /&gt;</span>
<span>+       &lt;metadata name=&quot;status-code&quot; value=&quot;@(context.Response.StatusCode.ToString())&quot; /&gt;</span>
    &lt;/trace&gt;
<span>+     &lt;!-- Send error notification --&gt;</span>
<span>+     &lt;send-one-way-request mode=&quot;new&quot;&gt;</span>
<span>+       &lt;set-url&gt;https://monitoring.example.com/api/alerts&lt;/set-url&gt;</span>
<span>+       &lt;set-method&gt;POST&lt;/set-method&gt;</span>
<span>+       &lt;set-header name=&quot;Content-Type&quot; exists-action=&quot;override&quot;&gt;</span>
<span>+         &lt;value&gt;application/json&lt;/value&gt;</span>
<span>+       &lt;/set-header&gt;</span>
<span>+       &lt;set-body&gt;@{</span>
<span>+         return new JObject(</span>
<span>+           new JProperty(&amp;quot;error&amp;quot;, context.LastError.Message),</span>
<span>+           new JProperty(&amp;quot;requestId&amp;quot;, context.RequestId),</span>
<span>+           new JProperty(&amp;quot;timestamp&amp;quot;, DateTime.UtcNow.ToString())</span>
<span>+         ).ToString();</span>
<span>+       }&lt;/set-body&gt;</span>
<span>+     &lt;/send-one-way-request&gt;</span>
  &lt;/on-error&gt;
&lt;/policies&gt;
</code></pre>
</details>
